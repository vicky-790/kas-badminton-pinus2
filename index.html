<!DOCTYPE html>
<html lang="id">
<head>
  <!-- =====================================================
    Kas Badminton Pinus 2 - Website Transparansi Dana Kas
    FILE: index.html (FINAL)
    - Layout + UI Komponen
    - Data angka diisi oleh app.js (Firebase)
  ====================================================== -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- âœ… Judul tab browser -->
  <title>Kas Badminton Pinus 2</title>

  <!-- âœ… Hubungkan CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- âœ… Icon kecil tab -->
  <link rel="icon" type="image/png" href="https://img.icons8.com/fluency/48/badminton.png" />
</head>

<body>
  <!-- =====================================================
    1) HEADER / BRAND
    - Logo kecil + judul + moto
  ====================================================== -->
  <header class="header">
    <div class="brand">
      <!-- âœ… Icon / logo -->
      <div class="brand-icon" aria-hidden="true">ğŸ¸</div>

      <!-- âœ… Nama + Moto -->
      <div class="brand-text">
        <div class="brand-title">Kas Badminton Pinus 2</div>
        <div class="brand-sub">Main Kompak, Kas Transparan, Badan Sehat.</div>
      </div>
    </div>
  </header>

  <!-- =====================================================
    2) NAVIGATION
    - Tombol pindah halaman (SPA)
    - app.js akan show/hide page
  ====================================================== -->
  <nav class="nav">
    <button class="nav-btn active" data-page="home">Home</button>
    <button class="nav-btn" data-page="laporan">Laporan</button>
    <button class="nav-btn" data-page="anggota">Anggota</button>
    <button class="nav-btn" data-page="admin">Admin</button>
  </nav>

  <!-- =====================================================
    3) MAIN WRAPPER
  ====================================================== -->
  <main class="wrap">

    <!-- =====================================================
      PAGE: HOME
    ====================================================== -->
    <section class="page show" id="page-home">

      <!-- HERO CARD -->
      <div class="card hero">
        <h1>Transparansi Dana Kas</h1>
        <p class="muted">
          Website kas komunitas <b>Badminton Pinus 2</b>. Data tersimpan online agar semua anggota bisa akses.
        </p>

        <!-- Ringkasan / Dashboard -->
        <div class="grid-2 mt">
          <!-- âœ… angka akan diisi oleh app.js -->
          <div class="stat">
            <div class="stat-title">Saldo Total</div>
            <div class="stat-value" id="saldoTotal">Rp 0</div>
          </div>

          <div class="stat">
            <div class="stat-title">Membership Bulan Ini</div>
            <div class="stat-value" id="totalMembership">Rp 0</div>
          </div>

          <div class="stat">
            <div class="stat-title">Main (Sabtu) Bulan Ini</div>
            <div class="stat-value" id="totalMain">Rp 0</div>
          </div>

          <div class="stat">
            <div class="stat-title">Pengeluaran Bulan Ini</div>
            <div class="stat-value" id="totalExpense">Rp 0</div>
          </div>
        </div>

        <!-- CTA -->
        <div class="actions mt">
          <button class="btn primary" data-goto="laporan">ğŸ“‹ Lihat Laporan</button>
          <button class="btn" data-goto="admin">â• Input Kas</button>
        </div>
      </div>

      <!-- INFO IURAN -->
      <div class="card">
        <h2>Info Iuran</h2>
        <ul class="list">
          <li><b>Membership Bulanan:</b> Rp 70.000 / member / bulan</li>
          <li><b>Main Sabtu Pagi:</b> Rp 20.000 / hadir</li>
          <li><b>Jadwal:</b> Setiap Sabtu pagi</li>
        </ul>

        <hr class="line" />

        <p class="muted tiny">
          Data online di Firebase, tapi dibuat hemat limit: load per bulan + cache + refresh manual.
        </p>
      </div>
    </section>

    <!-- =====================================================
      PAGE: LAPORAN
    ====================================================== -->
    <section class="page" id="page-laporan">

      <!-- FILTER BULAN + TAHUN -->
      <div class="card">
        <div class="row-between">
          <div>
            <h2 style="margin:0;">Laporan Transaksi</h2>
            <p class="muted tiny" style="margin:4px 0 0;">
              Filter per bulan/tahun untuk hemat limit.
            </p>
          </div>

          <!-- tombol refresh manual -->
          <button class="btn ghost" id="btnRefresh">ğŸ”„ Refresh</button>
        </div>

        <div class="grid-2 mt">
          <div class="form">
            <label>Bulan</label>
            <select id="filterBulan"></select>
          </div>

          <div class="form">
            <label>Tahun</label>
            <select id="filterTahun"></select>
          </div>
        </div>

        <!-- Tab Filter jenis transaksi -->
        <div class="tabs mt">
          <button class="tab active" data-kind="all">Semua</button>
          <button class="tab" data-kind="membership">Membership</button>
          <button class="tab" data-kind="main">Main</button>
          <button class="tab" data-kind="expense">Expense</button>
        </div>

        <!-- Summary -->
        <div class="grid-3 mt">
          <div class="stat mini">
            <div class="stat-title">Total Pemasukan</div>
            <div class="stat-value" id="lapPemasukan">Rp 0</div>
          </div>
          <div class="stat mini">
            <div class="stat-title">Total Pengeluaran</div>
            <div class="stat-value" id="lapPengeluaran">Rp 0</div>
          </div>
          <div class="stat mini">
            <div class="stat-title">Selisih</div>
            <div class="stat-value" id="lapSelisih">Rp 0</div>
          </div>
        </div>
      </div>

      <!-- TABLE TRANSAKSI -->
      <div class="card">
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Tanggal</th>
                <th>Jenis</th>
                <th>Nama / Kategori</th>
                <th>Nominal</th>
                <th>Catatan</th>
              </tr>
            </thead>
            <tbody id="txTable">
              <tr>
                <td colspan="5" class="muted">Belum ada transaksi.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- =====================================================
      PAGE: ANGGOTA
    ====================================================== -->
    <section class="page" id="page-anggota">

      <!-- TABLE MEMBERSHIP -->
      <div class="card">
        <h2>Daftar Anggota</h2>
        <p class="muted tiny">
          Status â€œLunas/Belumâ€ dihitung dari pembayaran membership bulan yang dipilih.
        </p>

        <div class="table-wrap mt">
          <table class="table">
            <thead>
              <tr>
                <th>Nama</th>
                <th>Status</th>
                <th>Membership</th>
              </tr>
            </thead>
            <tbody id="memberTable">
              <tr>
                <td colspan="3" class="muted">Memuat data anggota...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- âœ… TOP 5 TELAT MEMBERSHIP -->
      <div class="card">
        <h3 style="margin:0 0 10px;">Top 5 Telat Membership (Bulan ini)</h3>
        <div id="topTelat" class="muted">-</div>
      </div>
    </section>

    <!-- =====================================================
      PAGE: ADMIN
      - Admin Code untuk unlock
      - Input Pemasukan & Pengeluaran
      - Kelola Anggota
      - Export CSV/PDF
    ====================================================== -->
    <section class="page" id="page-admin">

      <!-- LOCK SCREEN ADMIN -->
      <div class="card" id="adminLock">
        <h2>Admin Panel</h2>
        <p class="muted">
          Masukkan kode admin untuk membuka fitur input kas.
        </p>

        <div class="grid-2 mt">
          <div class="form">
            <label>Kode Admin</label>
            <input id="adminCode" type="password" placeholder="kode rahasia" />
          </div>

          <div class="form">
            <label>&nbsp;</label>
            <button class="btn primary" id="btnUnlock">ğŸ”“ Buka Admin</button>
          </div>
        </div>
      </div>

      <!-- ADMIN PANEL (HIDDEN) -->
      <div class="card hide" id="adminPanel">

        <div class="row-between">
          <h2 style="margin:0;">Input Kas</h2>
          <button class="btn ghost" id="btnReloadAll">â™»ï¸ Reload data</button>
        </div>

        <!-- ============ PEMASUKAN ============ -->
        <h3 class="mt">Pemasukan</h3>
        <div class="grid-2">
          <div class="form">
            <label>Jenis</label>
            <select id="payJenis">
              <option value="membership">Membership</option>
              <option value="main">Main</option>
            </select>
          </div>

          <div class="form">
            <label>Tanggal</label>
            <input id="payTanggal" type="date" />
          </div>

          <div class="form">
            <label>Member</label>
            <select id="payMember"></select>
          </div>

          <div class="form">
            <label>Nominal</label>
            <input id="payNominal" type="number" />
          </div>

          <div class="form">
            <label>Metode</label>
            <select id="payMetode">
              <option value="cash">Cash</option>
              <option value="transfer">Transfer</option>
            </select>
          </div>

          <div class="form">
            <label>Catatan</label>
            <input id="payCatatan" placeholder="opsional" />
          </div>
        </div>

        <div class="actions mt">
          <button class="btn primary" id="btnSubmitPay">âœ… Simpan Pemasukan</button>
        </div>

        <hr class="line" />

        <!-- ============ PENGELUARAN ============ -->
        <h3>Pengeluaran</h3>
        <div class="grid-2">
          <div class="form">
            <label>Tanggal</label>
            <input id="expTanggal" type="date" />
          </div>

          <div class="form">
            <label>Kategori</label>
            <input id="expKategori" placeholder="contoh: Shuttlecock" />
          </div>

          <div class="form">
            <label>Nominal</label>
            <input id="expNominal" type="number" />
          </div>

          <div class="form">
            <label>Catatan</label>
            <input id="expCatatan" placeholder="opsional" />
          </div>
        </div>

        <div class="actions mt">
          <button class="btn danger" id="btnSubmitExp">ğŸ§¾ Simpan Pengeluaran</button>
        </div>

        <!-- ==================================================
          âœ… FITUR BARU: Kelola Anggota + Export
        =================================================== -->
        <div class="divider"></div>

        <h3 style="margin:0 0 10px;">Kelola Anggota</h3>
        <div class="grid-2">
          <div class="form">
            <label>Nama Anggota Baru</label>
            <input id="newMemberName" placeholder="contoh: Andi" />
          </div>
          <div class="form">
            <label>Status</label>
            <select id="newMemberStatus">
              <option value="aktif">aktif</option>
              <option value="nonaktif">nonaktif</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <button class="btn" id="btnAddMember">â• Tambah Anggota</button>
          <button class="btn danger" id="btnRemoveMember">ğŸ—‘ï¸ Hapus Anggota Terpilih</button>
        </div>

        <p class="muted tiny mt">
          *Hapus anggota berdasarkan dropdown Member pada input kas (yang dipilih).
        </p>

        <div class="divider"></div>

        <h3 style="margin:0 0 10px;">Export Laporan</h3>
        <div class="actions">
          <button class="btn ghost" id="btnExportCSV">â¬‡ï¸ Export CSV (bulan ini)</button>
          <button class="btn ghost" id="btnExportPDF">â¬‡ï¸ Export PDF (bulan ini)</button>
        </div>

      </div>
    </section>

  </main>

  <!-- =====================================================
    4) SCRIPT UTAMA
    - app.js harus type="module" karena ada import firebase CDN
  ====================================================== -->
  <script type="module" src="app.js"></script>
</body>
</html>