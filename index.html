<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" /> <!-- âœ… encoding -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- âœ… biar responsive hp -->
  <title>Kas Badminton Pinus 2</title> <!-- âœ… judul tab -->

  <!-- âœ… CSS utama -->
  <link rel="stylesheet" href="style.css" />

  <!-- âœ… Icon (opsional, kalau ga ada gapapa) -->
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1040/1040230.png" />
</head>

<body>
  <!-- =====================================================
    HEADER
  ====================================================== -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">ğŸ¸</div> <!-- âœ… icon logo -->
      <div class="brand-text">
        <h1>Kas Badminton Pinus 2</h1> <!-- âœ… nama website -->
        <p>Main Kompak, Kas Transparan, Badan Sehat.</p> <!-- âœ… motto -->
      </div>
    </div>

    <!-- âœ… navigasi tab -->
    <nav class="nav">
      <button class="nav-btn active" data-page="home">Home</button>
      <button class="nav-btn" data-page="laporan">Laporan</button>
      <button class="nav-btn" data-page="anggota">Anggota</button>
      <button class="nav-btn" data-page="admin">Admin</button>
    </nav>
  </header>

  <!-- =====================================================
    MAIN CONTENT
  ====================================================== -->
  <main class="container">

    <!-- =====================================================
      PAGE: HOME
    ====================================================== -->
    <section id="page-home" class="page show">
      <div class="hero-card">
        <h2>Transparansi Dana Kas</h2>
        <p>
          Website kas komunitas <b>Badminton Pinus 2</b>.
          Data tersimpan online agar semua anggota bisa akses.
        </p>

        <!-- âœ… ringkasan kas -->
        <div class="stats-grid">
          <div class="stat-box">
            <span class="muted">Saldo Total</span>
            <h3 id="saldoTotal">Rp 0</h3>
          </div>

          <div class="stat-box">
            <span class="muted">Membership Bulan Ini</span>
            <h3 id="totalMembership">Rp 0</h3>
          </div>

          <div class="stat-box">
            <span class="muted">Main (Sabtu) Bulan Ini</span>
            <h3 id="totalMain">Rp 0</h3>
          </div>

          <div class="stat-box">
            <span class="muted">Pengeluaran Bulan Ini</span>
            <h3 id="totalExpense">Rp 0</h3>
          </div>
        </div>

        <!-- âœ… tombol shortcut -->
        <div class="btn-row">
          <button class="btn btn-primary" data-goto="laporan">ğŸ“‹ Lihat Laporan</button>
          <button class="btn btn-ghost" data-goto="admin">â• Input Kas</button>
        </div>
      </div>

      <!-- âœ… info iuran -->
      <div class="card">
        <h3>Info Iuran</h3>
        <ul class="list">
          <li><b>Membership Bulanan:</b> Rp 70.000 / member / bulan</li>
          <li><b>Main Sabtu Pagi:</b> Rp 20.000 / hadir</li>
          <li><b>Jadwal:</b> Setiap Sabtu pagi</li>
        </ul>

        <div class="muted small">
          Data online di Firebase, tapi dibuat hemat limit:
          load per bulan + cache + refresh manual.
        </div>
      </div>
    </section>

    <!-- =====================================================
      PAGE: LAPORAN
    ====================================================== -->
    <section id="page-laporan" class="page">
      <div class="card">
        <div class="row-between">
          <div>
            <h2>Laporan Kas</h2>
            <p class="muted">Filter bulan & lihat semua transaksi.</p>
          </div>

          <!-- âœ… tombol refresh -->
          <button id="btnRefresh" class="btn btn-ghost">ğŸ”„ Refresh Bulan Ini</button>
        </div>

        <!-- âœ… filter -->
        <div class="filters">
          <div class="filter-item">
            <label class="label">Bulan</label>
            <select id="filterBulan" class="input"></select> <!-- âœ… isi via JS -->
          </div>

          <div class="filter-item">
            <label class="label">Tahun</label>
            <select id="filterTahun" class="input"></select> <!-- âœ… isi via JS -->
          </div>
        </div>

        <!-- âœ… tab jenis transaksi -->
        <div class="tabs">
          <button class="tab active" data-kind="all">Semua</button>
          <button class="tab" data-kind="membership">Membership</button>
          <button class="tab" data-kind="main">Main</button>
        </div>

        <!-- âœ… summary laporan -->
        <div class="summary-grid">
          <div class="sum-box">
            <span class="muted">Total Pemasukan</span>
            <h3 id="lapPemasukan">Rp 0</h3>
          </div>
          <div class="sum-box">
            <span class="muted">Total Pengeluaran</span>
            <h3 id="lapPengeluaran">Rp 0</h3>
          </div>
          <div class="sum-box">
            <span class="muted">Selisih</span>
            <h3 id="lapSelisih">Rp 0</h3>
          </div>
        </div>

        <!-- âœ… tabel transaksi -->
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Tanggal</th>
                <th>Jenis</th>
                <th>Nama / Kategori</th>
                <th>Nominal</th>
                <th>Catatan</th>
              </tr>
            </thead>
            <tbody id="txTable">
              <tr><td colspan="5" class="muted">Memuat data...</td></tr>
            </tbody>
          </table>
        </div>

        <!-- âœ… tombol export (nanti kalau fitur export udah hidup) -->
        <div class="btn-row">
          <button id="btnExportCSV" class="btn btn-ghost">â¬‡ï¸ Export CSV</button>
          <button id="btnExportPDF" class="btn btn-ghost">ğŸ§¾ Export PDF</button>
        </div>
      </div>
    </section>

    <!-- =====================================================
      PAGE: ANGGOTA
    ====================================================== -->
    <section id="page-anggota" class="page">
      <div class="card">
        <h2>Daftar Anggota</h2>
        <p class="muted">Status lunas membership bulan ini otomatis.</p>

        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Nama</th>
                <th>Status</th>
                <th>Membership</th>
              </tr>
            </thead>
            <tbody id="memberTable">
              <tr><td colspan="3" class="muted">Memuat data...</td></tr>
            </tbody>
          </table>
        </div>

        <!-- âœ… Top 5 telat -->
        <div class="card-inner">
          <h3>Top 5 Telat Bayar (Bulan Ini)</h3>
          <ol id="topTelat" class="list"></ol>
          <div class="muted small">* Berdasarkan urutan list member yang belum bayar.</div>
        </div>
      </div>
    </section>

    <!-- =====================================================
      PAGE: ADMIN
    ====================================================== -->
    <section id="page-admin" class="page">
      <!-- âœ… lock admin -->
      <div id="adminLock" class="card">
        <h2>ğŸ”’ Admin Input Kas</h2>
        <p class="muted">Masukkan kode admin untuk buka panel input.</p>

        <div class="row">
          <input id="adminCode" class="input" type="password" placeholder="kode admin..." />
          <button id="btnUnlock" class="btn btn-primary">Buka</button>
        </div>
      </div>

      <!-- âœ… panel admin -->
      <div id="adminPanel" class="card hide">
        <div class="row-between">
          <h2>Input Kas</h2>
          <button id="btnReloadAll" class="btn btn-ghost">â™»ï¸ Reload data</button>
        </div>

        <!-- =================================================
          INPUT PEMASUKAN
        ================================================== -->
        <h3>â• Input Pemasukan</h3>

        <label class="label">Jenis</label>
        <select id="payJenis" class="input">
          <option value="membership">Membership</option>
          <option value="main">Main (Sabtu)</option>
        </select>

        <label class="label">Tanggal</label>
        <input id="payTanggal" class="input" type="date" />

        <!-- =================================================
          âœ… MEMBER INPUT MANUAL (BARU)
          - bukan dropdown lagi
          - bisa ketik bebas
          - ada suggestion dari datalist (kalau ada)
        ================================================== -->
        <label class="label">Member</label>
        <input
          id="payMemberName"
          class="input"
          type="text"
          list="memberSuggestions"
          placeholder="ketik nama member..."
          autocomplete="off"
        />
        <datalist id="memberSuggestions"></datalist>

        <label class="label">Nominal</label>
        <input id="payNominal" class="input" type="number" inputmode="numeric" />

        <label class="label">Metode</label>
        <select id="payMetode" class="input">
          <option value="cash">Cash</option>
          <option value="transfer">Transfer</option>
        </select>

        <label class="label">Catatan</label>
        <input id="payCatatan" class="input" type="text" placeholder="opsional" />

        <button id="btnSubmitPay" class="btn btn-primary">âœ… Simpan Pemasukan</button>

        <hr class="line" />

        <!-- =================================================
          INPUT PENGELUARAN
        ================================================== -->
        <h3>â– Input Pengeluaran</h3>

        <label class="label">Tanggal</label>
        <input id="expTanggal" class="input" type="date" />

        <label class="label">Kategori</label>
        <input id="expKategori" class="input" type="text" placeholder="contoh: sewa lapangan" />

        <label class="label">Nominal</label>
        <input id="expNominal" class="input" type="number" inputmode="numeric" />

        <label class="label">Catatan</label>
        <input id="expCatatan" class="input" type="text" placeholder="opsional" />

        <button id="btnSubmitExp" class="btn btn-primary">âœ… Simpan Pengeluaran</button>

        <hr class="line" />

        <!-- =================================================
          âœ… ADMIN TAMBAH ANGGOTA (fitur baru)
        ================================================== -->
        <h3>ğŸ‘¥ Tambah Anggota</h3>
        <p class="muted small">Tambah anggota tanpa masuk Firebase Console.</p>

        <label class="label">Nama Anggota Baru</label>
        <input id="newMemberName" class="input" type="text" placeholder="contoh: Rian" />

        <button id="btnAddMember" class="btn btn-ghost">â• Tambah Anggota</button>
      </div>
    </section>

  </main>

  <!-- âœ… JS utama pakai module (wajib karena kita import firebase CDN) -->
  <script type="module" src="app.js"></script>
</body>
</html>